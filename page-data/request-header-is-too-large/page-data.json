{"componentChunkName":"component---src-templates-blog-post-js","path":"/request-header-is-too-large/","result":{"data":{"site":{"siteMetadata":{"title":"지은이의 개발 Blog","author":"Jieun Hong"}},"markdownRemark":{"id":"fdb16d39-6f4b-55db-b350-28d2e8adbe33","html":"<p>회사 동료 분이 일을 하다가 이상한 이슈를 발견했다.</p>\n<h2 id=\"header에-값을-길게-넣지도-않았는데-request-header-is-too-large-라는-에러가-뜬다는-것이었다\"><a href=\"#header%EC%97%90-%EA%B0%92%EC%9D%84-%EA%B8%B8%EA%B2%8C-%EB%84%A3%EC%A7%80%EB%8F%84-%EC%95%8A%EC%95%98%EB%8A%94%EB%8D%B0-request-header-is-too-large-%EB%9D%BC%EB%8A%94-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%9C%AC%EB%8B%A4%EB%8A%94-%EA%B2%83%EC%9D%B4%EC%97%88%EB%8B%A4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>header에 값을 길게 넣지도 않았는데 Request header is too large 라는 에러가 뜬다는 것이었다.</h2>\n<p>심지어 Options 요청에서 에러가 나서 브라우저 콘솔에는 CORS 에러로 나타났다. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@Tag</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"개발 편의용 API\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DevelopersController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Operation</span><span class=\"token punctuation\">(</span>summary <span class=\"token operator\">=</span> <span class=\"token string\">\"테스트\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/api/v1/developers/test\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span> <span class=\"token class-name\">String</span> test<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>예시로 사용할 Rest API를 살펴보자</p>\n<p>GET 메서드에 <code class=\"language-text\">@RequestParam</code>으로 문자열을 받아서 log에 출력해주는 APi이다. </p>\n<p><code class=\"language-text\">@RequestParam</code>은 Spring MVC에서 <strong>HTTP 요청의 Query String 또는 Form 데이터 값을 컨트롤러의 파라미터로 바인딩할 때 사용</strong>하는 어노테이션이다. </p>\n<p>GET 요청에서는 <strong>content-type이 없기 때문에</strong> 데이터를 Query String으로 받아온다.</p>\n<p>PUT, POST, PATCH 요청에서 form 데이터를 얻기 위해 Content-type을 아래와 같이 설정했다면, <strong>Request Body에 포함된 Form 데이터로 들어온다.</strong> </p>\n<blockquote>\n<p>Content-Type: application/x-www-form-urlencoded</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -X <span class=\"token string\">'GET'</span> <span class=\"token punctuation\">\\</span>\n  <span class=\"token string\">'http://localhost:8080/api/v1/developers/test?test=testtesttesttesttesttesttesttesttesttest......(중략)........testtesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttest'</span> <span class=\"token punctuation\">\\</span>\n  -H <span class=\"token string\">'accept: */*'</span></code></pre></div>\n<p><code class=\"language-text\">문제가 되는 API는 GET 메서드이기때문에 RequestParam이 QueryString을 받는 것으로 사용되고 있다.</code></p>\n<p>curl을 사용하여 terminal에서 요청을 보내보자 (QueryString의 값을 매우 길게 보내야함)</p>\n<p>그럼 아래와 같은 에러가 발생한다.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aab16483844b30e9d229d5656cc4559c/8f5d7/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 20.945945945945947%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxElEQVR42l2NSXbCMBBEfRgWIMkDaSx1wJJsywhnERa5/10qbYXhvSz+66quHqr56478/YO03jEuK/x8hR8zYrrBTxlhznBhBm3EpVR7iZJdX/mmh3HBOSZUMQQEPxS8v8BaAp9Y9FCYYkBte+yEvfg9OzRNg/MnwzlbIPqA0QpaqNKU4JjlkC0QEU7Uy6ADS58dg0S3fQ99PEJ1HbQcbNv2QQdjDJRSUFqjWvJaGlrME1W+vX0teVPXMNvS4fC3/I/n7C+wDYH2X/uKRAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/aab16483844b30e9d229d5656cc4559c/fcda8/4.png\"\n        srcset=\"/static/aab16483844b30e9d229d5656cc4559c/12f09/4.png 148w,\n/static/aab16483844b30e9d229d5656cc4559c/e4a3f/4.png 295w,\n/static/aab16483844b30e9d229d5656cc4559c/fcda8/4.png 590w,\n/static/aab16483844b30e9d229d5656cc4559c/efc66/4.png 885w,\n/static/aab16483844b30e9d229d5656cc4559c/c83ae/4.png 1180w,\n/static/aab16483844b30e9d229d5656cc4559c/8f5d7/4.png 1475w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">2025</span>-02-03T21:23:14.100+09:00  INFO <span class=\"token number\">13089</span> --- <span class=\"token punctuation\">[</span>intlcare-boot<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>nio-8080-exec-3<span class=\"token punctuation\">]</span> o.apache.coyote.http11.Http11Processor   <span class=\"token builtin class-name\">:</span> Error parsing HTTP request header\n Note: further occurrences of HTTP request parsing errors will be logged at DEBUG level.\n\njava.lang.IllegalArgumentException: Request header is too large</code></pre></div>\n<blockquote>\n<p><strong>Request header is too large</strong></p>\n</blockquote>\n<p>Request Header가 너무 길다는 에러가 발생하였다. </p>\n<p><code class=\"language-text\">이상하다 헤더는 -H &#39;accept: */*&#39; 한 줄만 사용했는데 왜 헤더가 너무 길다고 뜨는 것일까?</code></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/20883211ffc55ea07ea14d2736d385e1/f93b5/5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 300px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHbrFlGXif/xAAbEAACAgMBAAAAAAAAAAAAAAABAgMRAAQhM//aAAgBAQABBQIR9mUPmu0gR/WgQpof/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8Bqv/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AYj/xAAdEAACAQQDAAAAAAAAAAAAAAABEQACECFBMTJx/9oACAEBAAY/Agxnl7gB1F2RlPhjIzb/xAAbEAADAAIDAAAAAAAAAAAAAAAAAREhMUFh0f/aAAgBAQABPyFNaPtEr4SjGuEE9zoXPz5EpRxsZBOH/9oADAMBAAIAAwAAABCPH//EABcRAAMBAAAAAAAAAAAAAAAAAAABEUH/2gAIAQMBAT8QhYQf/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARQf/aAAgBAgEBPxAb21f/xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhMUFRYcH/2gAIAQEAAT8QgYvQYLZfHWCgL+TBfuSMQ2IQdvVwiLg3A4A6MokLYZ//2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/20883211ffc55ea07ea14d2736d385e1/f93b5/5.jpg\"\n        srcset=\"/static/20883211ffc55ea07ea14d2736d385e1/a80bd/5.jpg 148w,\n/static/20883211ffc55ea07ea14d2736d385e1/1c91a/5.jpg 295w,\n/static/20883211ffc55ea07ea14d2736d385e1/f93b5/5.jpg 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<em>Header는 변한게 없는데 Too Large라뇨 의사양반..</em></p>\n<p>어이없어서 HTTP 통신을 다시 찾아봤다.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4ea837f79575719582a7281265e29f93/73fd0/0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 47.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABj0lEQVR42lVRy5aiMBTk/7/JxfSiabEFRZFXEETBhBveD0EbwlzGzXSdnHuySN2qSklVVQFAURRZluPM3+cfsizjnANPgWcMuBBi/g2pruvz+ayqqmM7B/1gGIZpmt/fG1XduoQA5zlneXKF2BfPZv5pGY1vt1scRX3fS23buq4rf37udrvVavXx8Uf++jqdTuHlgo/QTUlJSR3ObuLVzGPHIUkSwPF4PBbl6zVEpq7v9YO+3W41TWUJdF2HKdI0KzIo7w6wSPx089RjvCiK0jTFEFLTNCiirNeyLOu6vtlsFEXRNA0n6q8Vxffchrlwv4ihRtuQUEI8SukkxKKM9izLOhmGbdue5+33e4yN4fEj0zTPqVdQAgkT43MWr77v0HBVV8MwLOQwDAkhlm1Ztu04DgriDT8CV1CWlHCtmQOX49TG80Bt84AZcS/ukLCqOI58//ymIYe47tE4mpbpBwFWVeVArJ3vHufpMY9twmgQBOM4LVVhZkxf/Ua9oCrLEqvO8yK+0+fr9X/D787/ArEJ5cLeajMsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/4ea837f79575719582a7281265e29f93/fcda8/0.png\"\n        srcset=\"/static/4ea837f79575719582a7281265e29f93/12f09/0.png 148w,\n/static/4ea837f79575719582a7281265e29f93/e4a3f/0.png 295w,\n/static/4ea837f79575719582a7281265e29f93/fcda8/0.png 590w,\n/static/4ea837f79575719582a7281265e29f93/73fd0/0.png 793w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b30230e4fa9827a61dcbecbd810af536/5b158/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 314px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1UlEQVR42n1Si46bMBDk/z+rao9LcgkH4ZoLISS8DAabh20w5tklOl17atXRYInVema1Y215YF6/OYpCPwh8/+a516ZtHrV5+Yp5/l3TxmnKimoYBtnJJ11/ORwOr4ZxMN8dVyr1ofsVtWiLmq+Xk5xGaQ7MitLxPH27+a7r1tF2rh6mVdcPjeya7kGpur5PaH2LcYQJE60WJBloJKSM8wLn2DCMzXZnWse8rCre9MOo+kH16wlC0zw5QfqoDyijmnMP3cvZ9UPwiZPEuVxjlIRh7KOENRJ0pxXjvB4j/GJSgNC8zHFKtPPVN/bbt5NzRzl0kxy/WiYtirppccEEr/XnzflyMl73p59Op1RGa4zTMAwjuIwwCe6eewtpxbgQNWO0LGHkkjForTmzbNu0j5erezTtlNA4owCcZrAmLcaE8zrNC9HKv/a6lIxHCdrudt+enh3XI1UVINzD2JArON8Rhqb3exJmJWTDpfwkayUuSss+/tA3L3vDtN4SQu4oK5lopAQ/DaZ9rJ724wSZ/0lAnEEEeRAGUYwIpRHOSy7AEyxlpzTYGwwMrcu/gEgFaaE4OF8cpVReMSHlMIxt162PZPkvOtXVXPC2BdZCMCEg6s8H/Qu2I6BU7lX9SQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/b30230e4fa9827a61dcbecbd810af536/5b158/1.png\"\n        srcset=\"/static/b30230e4fa9827a61dcbecbd810af536/12f09/1.png 148w,\n/static/b30230e4fa9827a61dcbecbd810af536/e4a3f/1.png 295w,\n/static/b30230e4fa9827a61dcbecbd810af536/5b158/1.png 314w\"\n        sizes=\"(max-width: 314px) 100vw, 314px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>HTTP 통신 중 요청, 즉 <code class=\"language-text\">Request는 크게 4가지의 구성요소</code>로 이루어져 있다. </p>\n<aside>\n💡\n<blockquote>\n<p><strong>Request line ( or Start line) :</strong> http method와 요청 url, http 프로토콜 버전으로 이루어진다. </p>\n</blockquote>\n<p><strong>Header :</strong> header 정보가 담겨있다.</p>\n<p><strong>Blank line :</strong> 구분하기위한 구분자</p>\n<p><strong>Body(선택값) :</strong> 데이터를 전송하기 위한 공간.</p>\n<blockquote>\n</blockquote>\n</aside>\n<p>알 수 있듯이 queryString은 url에 포함되고, request line이다.</p>\n<p>근데 왜 header is too large 인가!! </p>\n<p>chatGPT에게 질문했다. </p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/88b2d69949fca6d3385d9539d3c4e4f5/10ab7/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 76.35135135135135%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8ElEQVR42o1U2W7iQBD0/38aD5GIFwi+8H0b3+ZIpMpUo0HeDZH2ofCMp7tcXS5spHGKJErgODaOxyM8z4VtW3BdV9ZNU2NZFkzThHn+HdM0YhxHGH7r4817Q+RHcoMYhgF93wu4J9n/YYZR9zWiIkKRF6jrWtB1HS6XiyjTmOdZsL63But5bnRthziMcTqdBL7vI0kStG2L8/ksaJrmx3WNqqqQZZlMZHA8FmmCpjmjqiukaYY8L1EUpVLdoCxLaeZVP0j3cSqK4GRCeDgcsN1usdls8P5uqhcSIEsVQd0pkk55s2C328k5Ca/X61+43W643+8yukEzPc9DEASIokiQJoV4wsIHrqKOlrCJzTz/F+Lhon7CMJQROQKLv74+n2QkoAr6Q3X0inU8e0nYDjNcP4RjP3LoOI68GFvtCd1Ia+iRjhKbX0XH6PtWKQzU2CchIKFlWeIr9ySnKq1CR+gR9PkHjGloEPqOEPLfQUJ6xTXJuKbHOiJU+Js6UdgNIw4fFvb7/VMVXwyJtUISxnGsfE5fhn4dfuXhBMvx8KHITPOP+MiRTdOUKBF8UFEU4uM68Fxr5dzz3KDB/DBQIcPJN8mg6iKuSUbkeS6gUq2YCdGRY4/kUI9I33j4+NJ4zz3HJqictRybUeLoOtzahm+Bd2ZO7TN1pgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/88b2d69949fca6d3385d9539d3c4e4f5/fcda8/2.png\"\n        srcset=\"/static/88b2d69949fca6d3385d9539d3c4e4f5/12f09/2.png 148w,\n/static/88b2d69949fca6d3385d9539d3c4e4f5/e4a3f/2.png 295w,\n/static/88b2d69949fca6d3385d9539d3c4e4f5/fcda8/2.png 590w,\n/static/88b2d69949fca6d3385d9539d3c4e4f5/efc66/2.png 885w,\n/static/88b2d69949fca6d3385d9539d3c4e4f5/c83ae/2.png 1180w,\n/static/88b2d69949fca6d3385d9539d3c4e4f5/10ab7/2.png 1552w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><strong>그렇다!</strong> </p>\n<p><strong>header는 아니지만, 서버에서 url을 헤더 크기 계산에 포함하고, 덕분에 header는 작아도 url이 커서 해당 에러가 날 수 있다고 한다.</strong></p>\n<p>에러를 해결하는 방법은 크게 3가지이다.</p>\n<ol>\n<li>\n<p><strong>쿼리 스트링 크기 줄이기</strong></p>\n<ul>\n<li>간단하다. 그냥 쿼리 스트링에 들어갈 값을 적게 하면 된다.</li>\n</ul>\n</li>\n<li>\n<p><strong>GET 대신 POST 사용</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@Tag</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"개발 편의용 API\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DevelopersController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Operation</span><span class=\"token punctuation\">(</span>summary <span class=\"token operator\">=</span> <span class=\"token string\">\"테스트\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/api/v1/developers/test\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">String</span> test<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>POST로 변경한 뒤, 변수를 Body에서 받으면 변수의 값이 header의 크기에 영향을 주지 않기 때문에 문제가 발생하지 않는다. </li>\n</ul>\n</li>\n<li><strong>서버의 Header 크기 제한 조정</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">server.max<span class=\"token punctuation\">-</span>http<span class=\"token punctuation\">-</span>request<span class=\"token punctuation\">-</span>header<span class=\"token punctuation\">-</span>size=64KB  <span class=\"token comment\"># 기본값은 8KB</span></code></pre></div>\n<ul>\n<li>tomcat(spring boot 내장 웹서버) 설정에서 header size max를 늘리는 방법도 존재한다. </li>\n</ul>\n<p>위 방법들을 적용하면 아래와 같이 정상적으로 동작하는 것을 볼 수 있다. </p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a5506c51ee46381a55678112d4a184d8/8aace/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 16.89189189189189%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAV0lEQVR42qXMMRKAIAxEUc4FJGEDIve/0IrOaKF0Fm9+ZouE1nf2Mdi2nQVOeL16sgKqlYfodPdt7qiNwURpZgRAd1/A98a6OQuDz88pZ6oI5QdVZYyJB6M2aHmghvi9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/a5506c51ee46381a55678112d4a184d8/fcda8/3.png\"\n        srcset=\"/static/a5506c51ee46381a55678112d4a184d8/12f09/3.png 148w,\n/static/a5506c51ee46381a55678112d4a184d8/e4a3f/3.png 295w,\n/static/a5506c51ee46381a55678112d4a184d8/fcda8/3.png 590w,\n/static/a5506c51ee46381a55678112d4a184d8/efc66/3.png 885w,\n/static/a5506c51ee46381a55678112d4a184d8/c83ae/3.png 1180w,\n/static/a5506c51ee46381a55678112d4a184d8/8aace/3.png 2732w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>개인적인 의견으로는 세 가지 방법 중에 2번 째 방법을 사용하는 것이 가장 좋은 선택이라고 생각한다. <em>(경우에 따라 정답이 아닐 수도 있음)</em></p>\n<p>1번의 경우, 임시방법으로 해결하는 것이라 변수의 값이 길어지면 언젠가 또 발생할 수 있기 때문에 해결법이 아니다.</p>\n<p>3번의 경우, 모든 http api에 적용되는 설정으로 모든 api의 header 제한이 줄어듬으로써 서버의 자원을 낭비하고, 자원 공격 위험에 노출되어있다. </p>\n<p>또한 queryString에 저렇게 많은 데이터를 보내야 하는 API 라면, GET 메서드가 적합한지 다시 한 번 생각해봐야 한다. 너무 큰 데이터를 url과 header에 노출시키는 것을 항상 조심하고 body에 담아, 데이터 손실이나 공격에 대한 위협에서 보호해야한다.</p>\n<hr>\n<h2 id=\"참고-사이트\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고 사이트</h2>\n<p><a href=\"http://www.ktword.co.kr/test/view/view.php?m_temp1=4884&#x26;id=902\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.ktword.co.kr/test/view/view.php?m_temp1=4884&#x26;id=902</a></p>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/HTTP/Messages\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://developer.mozilla.org/ko/docs/Web/HTTP/Messages</a></p>\n<p><a href=\"https://www.baeldung.com/spring-boot-max-http-header-size\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.baeldung.com/spring-boot-max-http-header-size</a></p>\n<p><a href=\"https://blog.naver.com/pjt3591oo/223658791971?trackingCode=rss\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://blog.naver.com/pjt3591oo/223658791971?trackingCode=rss</a></p>","timeToRead":4,"frontmatter":{"title":"Request header is too large (feat. @RequestParam, QueryString, CORS)","date":"February 01, 2025","spoiler":"Header는 변한게 없는데 Too Large라뇨 의사양반..","cta":"HTTP"},"fields":{"slug":"/request-header-is-too-large/","langKey":"en"}}},"pageContext":{"slug":"/request-header-is-too-large/","previous":{"fields":{"slug":"/aws-s3-presigned-url-cors-error/","langKey":"en","directoryName":"aws-s3-presigned-url-cors-error"},"frontmatter":{"title":"Presigned URL Upload 403 CORS 발생 Error (With. AWS S3, NCP Object storage)"}},"next":null,"translations":[],"translatedLinks":[]}},"staticQueryHashes":["336482444"]}